"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[827],{7179:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var i=s(5893),o=s(1151);const t={sidebar_position:4},a="Usage",d={id:"usage",title:"Usage",description:"Create resource file(s) in the resources.d directory with:",source:"@site/docs/usage.md",sourceDirName:".",slug:"/usage",permalink:"/psion/usage",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"docsSidebar",previous:{title:"Home",permalink:"/psion/"},next:{title:"Testing",permalink:"/psion/testing"}},l={},c=[];function r(e){const n={admonition:"admonition",code:"code",h1:"h1",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"usage",children:"Usage"}),"\n",(0,i.jsx)(n.p,{children:"Create resource file(s) in the resources.d directory with:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"---\napiVersion: files.psion.io/v1alpha1\nkind: File\nmetadata:\n  name: file-remove\nspec:\n  path: /tmp/foo\n  exists: false\n"})}),"\n",(0,i.jsx)(n.p,{children:"Build the binary:"}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Eventually move to a ",(0,i.jsx)(n.code,{children:"psion build"})," task."]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"task build\n"})}),"\n",(0,i.jsx)(n.p,{children:"Review the embedded files:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"psion version | jq\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "version": "0.0.1-next",\n  "commit": "088cde022f233c2b3c14581a15f069250b7fad08",\n  "date": "2023-09-02T20:08:14Z",\n  "resource_files": [\n    {\n      "path": "resources/01-file-remove.yaml",\n      "checksum": "6ebc658064483974a0d371a9b56fa021251f9fd61c30dbcd5be9ac397197909f",\n      "type": "SHA256"\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Preview the changes to be made:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"psion plan\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'9:49PM INF completed Status=Pending Kind=File APIVersion=files.psion.io/v1alpha1 File.Path=/tmp/foo File.Exists=false Conditions.Remove.Type=Remove Conditions.Remove.Status=Pending Conditions.Remove.Message="file does not exist" Conditions.Remove.Reason=Plan Conditions.Remove.Got="file does not exist" Conditions.Remove.Want=NoOp\n'})}),"\n",(0,i.jsx)(n.p,{children:"Apply desired state:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"psion apply\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'9:49PM INF completed Status=Succeeded Kind=File APIVersion=files.psion.io/v1alpha1 File.Path=/tmp/foo File.Exists=false Conditions.Remove.Type=Remove Conditions.Remove.Status=Succeeded Conditions.Remove.Message="file does not exist" Conditions.Remove.Reason=Apply Conditions.Remove.Got="file does not exist" Conditions.Remove.Want=NoOp\n9:49PM INF wrote state file StateFile=.state\n'})}),"\n",(0,i.jsx)(n.p,{children:"Display status of apply:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"psion status\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"+-----------------+-----------+------+-------------------------+---------------------------------+\n| NAME            | STATUS    | KIND | APIVERSION              | CONDITIONS                      |\n+-----------------+-----------+------+-------------------------+---------------------------------+\n| file-remove-bla | Succeeded | File | files.psion.io/v1alpha1 |  Type    | Remove               |\n|                 |           |      |                         |  Status  | Succeeded            |\n|                 |           |      |                         |  Message | file does not exist  |\n|                 |           |      |                         |  Reason  | Apply                |\n|                 |           |      |                         |  Got     | file does not exist  |\n|                 |           |      |                         |  Want    | NoOp                 |\n+-----------------+-----------+------+-------------------------+---------------------------------+\n"})})]})}function p(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>d,a:()=>a});var i=s(7294);const o={},t=i.createContext(o);function a(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);